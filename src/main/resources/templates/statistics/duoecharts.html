<!doctype html>
<html class="x-admin-sm"  xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>综合统计</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />

	<link rel="stylesheet" href="./css/font.css" th:href="@{/css/font.css}">
	<link rel="stylesheet" href="./css/xadmin.css" th:href="@{/css/xadmin.css}">
	<script src="./js/dateformat.js" th:src="@{/js/dateformat.js}"></script>
	<script type="text/javascript" src="./lib/layui/layui.js" th:src="@{/lib/layui/layui.js}" charset="utf-8"></script>
	<script type="text/javascript" src="./js/xadmin.js" th:src="@{/js/xadmin.js}"></script>
	<style>
		body{
			background-color: #040f3c;
			height: 100%;
		}
		.title{
			height: 8%;
			color: #fff;
			font-size: 30px;
			padding: 20px 0 0 20px;
			font-weight: bold;
			box-sizing: border-box;
		}
		.con{
			height: 92%
		}
		.content{
			padding: 10px;
			box-sizing: border-box
		}
		.out.active{
			width: 100%;
		}
		.out.active .content{
			height: 100%;
		}
		.left,.right{
			width: 25%;
			float: left;
			height: 100%
		}
		.left .content,.right .content{
			height: 50%;
		}
		.center{
			width: 50%;
			height: 100%;
			float: left;
		}
		.center .content{
			height: 100%
		}
		.echarts{
			width: 100%;
			height: 100%;
			float: left;
			border: 1px solid #54dcf2;
			position: relative;
			padding: 10px;
			box-sizing: border-box;
		}
		.echarts span.jiao{
			position: absolute;
			width: 20px;
			height: 20px;
		}
		.echarts .title{width: 100%;height: 10%;color: #fff;font-size: 18px;font-weight: bold;}
		.echarts .inner{width: 100%;height: 100%}
		.echarts span.lt{top: -3px;left: -3px;border-top: 3px solid #54dcf2;border-left: 3px solid #54dcf2;}
		.echarts span.rt{top: -3px;right: -3px;border-top: 3px solid #54dcf2;border-right: 3px solid #54dcf2;}
		.echarts span.rb{bottom: -3px;right: -3px;border-bottom: 3px solid #54dcf2;border-right: 3px solid #54dcf2;}
		.echarts span.lb{bottom: -3px;left: -3px;border-bottom: 3px solid #54dcf2;border-left: 3px solid #54dcf2;}
		.echarts span.more,.echarts span.diminish,.echarts span.search_entrust,.echarts span.search_contract,.echarts span.search_map,.echarts span.search_type,.echarts span.search_typeMonth,.echarts span.search{position: absolute;top: 15px;right: 15px;color: #fff;display: none}
		.echarts span.more:hover,.echarts span.diminish:hover,.echarts span.search_map:hover,.echarts span.search_type:hover,.echarts span.search_entrust:hover,.echarts span.search_typeMonth:hover,.echarts span.search_contract:hover,.echarts span.search:hover{color: #0f0;cursor: pointer;text-decoration: underline}
		.echarts span.search,.echarts span.search_entrust,.echarts span.search_map,.echarts span.search_type,.echarts span.search_typeMonth,.echarts span.search_contract{right:60px}
		.echarts:hover .more{display: block}
		.active .echarts:hover .more{display: none}
		.active .echarts:hover .diminish,.active .echarts:hover .search_entrust,.active .echarts:hover .search_type,.active .echarts:hover .search_map,.active .echarts:hover .search_contract,.active .echarts:hover .search_typeMonth,.active .echarts:hover .search{display: block}
	</style>
</head>
<body>
<div class="title">阳光检测业务监控平台</div>
<!--地图显示时间-->
<input type="text" hidden="hidden" id="map_start" value="">
<input type="text" hidden="hidden" id="map_end" value="">
<div class="con">
	<div class="out left">
		<div class="content">
			<div class="echarts" id="echarts3">
				<div class="inner" id="contract"></div>
				<span class="more">更多</span>
				<span class="search_contract">筛选</span>
				<span class="diminish">收起</span>
			</div>
		</div>
		<div class="content">
			<div class="echarts" id="echarts4">
				<div class="inner" id="entrust"></div>
				<span id="count" style="position: absolute;top: 10px;right: 400px;color: #fff;font-size: initial"></span>
				<span class="more">更多</span>
				<span class="search_entrust">筛选</span>
				<span class="diminish">收起</span>
			</div>
		</div>
	</div>
	<div class="out center">
		<div class="content">
			<div class="echarts" id="echarts2">
				<!-- <div class="title">业务区划</div> -->
				<div class="inner" id="map"></div>
				<span class="more">更多</span>
				<span class="search_map">筛选</span>
				<span class="diminish">收起</span>
			</div>
		</div>
	</div>
	<div class="out right">
		<div class="content">
			<div class="echarts" id="echarts1">
				<!-- <div class="title">各大类检测年度对比</div> -->
				<div class="inner" id="type"></div>
				<span class="more">更多</span>
				<span class="search_type">筛选</span>
				<span class="diminish">收起</span>
			</div>
		</div>
		<div class="content">
			<div class="echarts" id="echarts5">
				<!-- <div class="title">报告年度统计</div> -->
				<div class="inner" id="typeMonth"></div>
				<span class="more">更多</span>
				<span class="search_typeMonth">筛选</span>
				<span class="diminish">收起</span>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
<script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
<!-- <script src="./js/contract.js"></script> -->
<!-- <script src="./js/entrust.js"></script> -->
<!-- <script src="./js/map.js"></script> -->
<!-- <script src="./js/type.js"></script> -->
<script src="./js/resize.js" th:src="@{/js/resize.js}"></script>
<script type="text/javascript">
    layui.use(['layer','laydate'],function(){
        var layer = layui.layer,
            laydate = layui.laydate
        var dom = '<span class="jiao lt"></span><span class="jiao rt"></span><span class="jiao rb"></span><span class="jiao lb"></span>'
        $(".echarts").append(dom)


        var contract = echarts.init(document.getElementById('contract'));
        var entrust = echarts.init(document.getElementById('entrust'));
        var map = echarts.init(document.getElementById('map'));
        var type = echarts.init(document.getElementById('type'));
        var typeMonth = echarts.init(document.getElementById('typeMonth'));


        //合同
        var contractO = {
            title: {
                text: '合同年度统计',
                textStyle:{
                    color:"#fff"
                }
            },
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                },
                /*formatter: function (params) {
                    var tar;
                    if (params[1].value != '-') {
                        tar = params[1];
                    }
                    else {
                        tar = params[2];
                    }
                    return tar.name+'月' + '<br/>' + tar.seriesName + ' : ' + tar.value;
                }*/
            },
            legend: {
                data:['减少','增加'],
                textStyle:{
                    color:"#fff"
                }
            },
            xAxis: {
                type : 'category',
                splitLine: {show:false},
                data :  [],
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#fff'   //这里用参数代替了
                    }
                },
            },
            yAxis: {
                type : 'value',
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#fff'   //这里用参数代替了
                    }
                },
            },
            series: [
                {
                    name: '辅助',
                    type: 'bar',
                    stack: '总量',
                    itemStyle: {
                        normal: {
                            barBorderColor: 'rgba(0,0,0,0)',
                            color: 'rgba(0,0,0,0)'
                        },
                        emphasis: {
                            barBorderColor: 'rgba(0,0,0,0)',
                            color: 'rgba(0,0,0,0)'
                        }
                    },
                    data:[]
                },
                {
                    name: '增加',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data:[],
                    itemStyle:{
                        color:"#0f0"
                    }
                },
                {
                    name: '减少',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'bottom'
                        }
                    },
                    data:[],
                    itemStyle:{
                        color:"#00f"
                    }
                }
            ]
        };
        contract.setOption(contractO);
        //表格数据渲染
//				contract.clear()
        $.ajax({
            url:"Calculation_contract",
            method:"post",
            success:function (data) {
                if(data.code == 1){
                    contract.setOption({
                        xAxis: {
                            data:data.data[0],
                        },
                        series: [
                            {
                                name: '辅助',
                                data:data.data[1],
                            },
                            {
                                name: '增加',
                                data:data.data[2],
                            },
                            {
                                name: '减少',
                                data: data.data[3],
                            }
                        ]
                    });
                }
                if(data.code == 2){
                    layer.msg("无合同记录!")
                }

            }
        })
        // 委托单
        var entrustO = {
            title: {
                text: '委托单年度统计',
                textStyle:{
                    color:"#fff"
                }
            },
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                },
            },
            legend: {
                data: ['合同', '非合同'],
                textStyle:{
                    color:"#fff"
                }
            },
            xAxis: {
                type : 'category',
                splitLine: {show:false},
                data :  ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#fff'   //这里用参数代替了
                    }
                },
            },
            yAxis: {
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#fff'   //这里用参数代替了
                    }
                },
            },
            series: [
                {
                    name: '合同',
                    type: 'bar',
                    stack: 'one',
                    itemStyle: {
                        color:"#f00"
                    },
                    data: []
                },
                {
                    name: '非合同',
                    type: 'bar',
                    stack: 'one',
                    itemStyle: {
                        color:"#00f"
                    },
                    data: []
                },
            ]
        };
        entrust.setOption(entrustO);

        $.ajax({
            url : 'getJcCoreWtInfoInOneYear',
            type : 'post',
            dataType: 'json',
            async : 'false',
            success : function(result) {
                if (result.success) {
                    console.log(result);
                    $('#count').html("总数："+result.data[2]);
                    entrust.setOption({
                        xAxis: {
                            data :  result.data[0],
                        },
                        series: [
                            {
                                name: '合同',
                                data: result.data[1][0],
                                label: {
                                    normal: {
                                        show: true,
                                        position: 'inside',
                                        formatter: function (num) {
                                            if (num.value > 0){
                                                return num.value;
                                            }else {
                                                return "";
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                name: '非合同',
                                data: result.data[1][1],
                                label: {
                                    normal: {
                                        show: true,
                                        position: 'inside',
                                        formatter: function (num) {
                                            if (num.value > 0){
                                                return num.value;
                                            }else {
                                                return "";
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                name: '总计',
                                type: 'line',
                                lineStyle:{
                                    opacity : 0,
                                },
                                label:{
                                    show: true,
                                    textStyle:{
                                        color:'#fff'
                                    },
                                    formatter: function (num) {
                                        if (num.value > 0){
                                            return num.value;
                                        }else {
                                            return "";
                                        }
                                    }
                                },
                                data: result.data[1][2]
                            }

                        ]
                    });

                } else {
                    alert(result.message);
                }
            }
        });

        //地图
        var mapO = {
            title : {
                text: '区域委托单统计',
                textStyle:{
                    color:"#fff"
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: '{b}<br/>{c}'
            },
            visualMap: {
                min: 800,
                max: 10000,
                text:['High','Low'],
                realtime: false,
                calculable: true,
                inRange: {
                    color: ['lightskyblue','yellow', 'orangered']
                },
                textStyle:{
                    color:'#fff'
                }
            },
            series:[]
        };
        $.ajaxSettings.async = false;
        $.getJSON('./map/langfang.json', function(data){
            echarts.registerMap( 'hebei', data);
            var d = [];
            for( var i=0;i<data.features.length;i++ ){
                d.push({
                    name:data.features[i].properties.name
                })
                //AJAX获取城市区域的委托单统计
                $.ajax({
                    url:"getMapCityAreaWtCount",
                    method:"post",
                    data:{city:"廊坊市",area:d[i].name},
                    success:function (data) {
                        d[i].value = data.data
                    }
                })
            }
//					for(var i=0;i<d.length;i++){
//						var num = parseInt(Math.random()*(50000-800)+800,10)
//						d[i].value = num
//					}
            mapO.series[0] =  {
                left:'18%',
                top:'30%',
                zoom: 0.7,
                name: 'langfang',
                type: 'map',
                mapType: 'hebei',
                label: {
                    normal:{
                        show:true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    },
                    emphasis: {
                        show: true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    }
                },
                itemStyle: {
                    borderWidth:1,
                    borderColor:'#fff',
                    normal: {
                        areaColor: '#323c48',
                        borderColor: 'dodgerblue'
                    },
                    emphasis: {
                        areaColor: '#0f0'
                    }
                },
                data:d,
            }
        });
        $.getJSON('./map/beijing.json', function(data){
            echarts.registerMap( 'beijing', data);
            var d = [];
            for( var i=0;i<data.features.length;i++ ){
                d.push({
                    name:data.features[i].properties.name
                })
                $.ajax({
                    url:"getMapCityAreaWtCount",
                    method:"post",
                    data:{city:"北京市",area:d[i].name},
                    success:function (data) {
                        d[i].value = data.data
                    }
                })

            }
//					for(var i=0;i<d.length;i++){
//						var num = parseInt(Math.random()*(50000-800)+800,10)
//						d[i].value = num
//					}
            mapO.series[1] =  {
                left:'-10%',
                top:'-10%',
                zoom: 0.7,
                name: 'beijing',
                type: 'map',
                mapType: 'beijing',
                label: {
                    normal:{
                        show:true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    },
                    emphasis: {
                        show: true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    }
                },
                itemStyle: {
                    borderWidth:1,
                    borderColor:'#fff',
                    normal: {
                        areaColor: '#323c48',
                        borderColor: 'dodgerblue'
                    },
                    emphasis: {
                        areaColor: '#0f0'
                    }
                },
                data:d,
            }
        });
        $.getJSON('./map/tianjin.json', function(data){
            echarts.registerMap( 'tianjin', data);
            var d = [];
            for( var i=0;i<data.features.length;i++ ){
                d.push({
                    name:data.features[i].properties.name
                })
                $.ajax({
                    url:"getMapCityAreaWtCount",
                    method:"post",
                    data:{city:"天津市",area:d[i].name},
                    success:function (data) {
                        d[i].value = data.data
                    }
                })

            }
//					for(var i=0;i<d.length;i++){
//						var num = parseInt(Math.random()*(50000-800)+800,10)
//						d[i].value = num
//					}
            mapO.series[2] =  {
                left:'50%',
                top:'10%',
                zoom: 1,
                name: 'tianjin',
                type: 'map',
                mapType: 'tianjin',
                label: {
                    normal:{
                        show:true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    },
                    emphasis: {
                        show: true,
                        textStyle:{
                            color:'#fff',
                            fontSize:13
                        }
                    }
                },
                itemStyle: {
                    borderWidth:1,
                    borderColor:'#fff',
                    normal: {
                        areaColor: '#323c48',
                        borderColor: 'dodgerblue'
                    },
                    emphasis: {
                        areaColor: '#0f0'
                    }
                },
                data:d,
            }
        });
        map.setOption(mapO);
        //检测
        var typeO = {
            title : {
                text: '检测类年度对比',
                textStyle:{
                    color:"#fff"
                }
            },
            legend: {
                data: ['2018','2019'],
                textStyle:{color:'#fff'}
            },
            radar: {
                name: {
                    textStyle: {
                        color: '#fff',
                        backgroundColor: '#999',
                        borderRadius: 3,
                        padding: [3, 5]
                    }
                },
                center:['50%','54%'],
                shape:'polygon',
                indicator: [
                    { name: '项目1', max: 6500},
                    { name: '项目2', max: 16000},
                    { name: '项目3', max: 30000},
                    { name: '项目4', max: 38000},
                    { name: '项目5', max: 52000},
                    { name: '项目6', max: 25000},
                    { name: '项目7', max: 52000},
                    { name: '项目8', max: 25000}
                ]
            },
            series: [{
                type: 'radar',
                // areaStyle: {normal: {}},
                data : [
                    {
                        value : [4300, 10000, 28000, 35000, 50000, 19000,50000, 19000],
                        name : '2018',
                        itemStyle:{color:"#ec6253"},
                        label: {
                            normal: {
                                show: true,
                                formatter:function(params) {
                                    return params.value;
                                }
                            }
                        }
                    },
                    {
                        value : [5000, 14000, 28000, 31000, 42000, 21000,42000, 21000],
                        name : '2019',
                        itemStyle:{color:"#f2da4a"},
                        label: {
                            normal: {
                                show: true,
                                formatter:function(params) {
                                    return params.value;
                                }
                            }
                        }
                    }
                ]
            }]
        };
        type.setOption(typeO);

        //年度月份
        //检测
        var type1 = {
            title : {
                text: '检测月度对比',
                textStyle:{
                    color:"#fff"
                }
            },
            legend: {
                data: ['2019-01','2019-02'],
                textStyle:{color:'#fff'}
            },
            radar: {
                name: {
                    textStyle: {
                        color: '#fff',
                        backgroundColor: '#999',
                        borderRadius: 3,
                        padding: [3, 5]
                    }
                },
                center:['50%','54%'],
                shape:'polygon',
                indicator: [
                    { name: '项目1', max: 6500},
                    { name: '项目2', max: 16000},
                    { name: '项目3', max: 30000},
                    { name: '项目4', max: 38000},
                    { name: '项目5', max: 52000},
                    { name: '项目6', max: 25000},
                    { name: '项目7', max: 52000},
                    { name: '项目8', max: 25000}
                ]
            },
            series: [{
                type: 'radar',
                // areaStyle: {normal: {}},
                data : [
                    {
                        value : [4300, 10000, 28000, 35000, 50000, 19000,50000, 19000],
                        name : '2019-01',
                        itemStyle:{color:"#ec6253"},
                        label: {
                            normal: {
                                show: true,
                                formatter:function(params) {
                                    return params.value;
                                }
                            }
                        }
                    },
                    {
                        value : [5000, 14000, 28000, 31000, 42000, 21000,42000, 21000],
                        name : '2019-02',
                        itemStyle:{color:"#f2da4a"},
                        label: {
                            normal: {
                                show: true,
                                formatter:function(params) {
                                    return params.value;
                                }
                            }
                        }
                    }
                ]
            }]
        };
        typeMonth.setOption(type1);
        //年度默认条件
        $.ajax({
            url:"getCountJcXtcsXm",
            method:"post",
            success:function (data) {
                console.log(data)
                if (data.code == 1) {
//                            console.log(data.data[0][1])
                    var requireSmallData = []
                    var requireBigData = []
                    for (var i = 0;i<data.data[2].length;i++){
                        if(i<data.data[1].length){
                            requireSmallData.push(data.data[2][i])
                        }else{
                            requireBigData.push(data.data[2][i])
                        }
                    }
                    var indicatorMax = []
                    for(var i = 0;i < requireSmallData.length; i++){
                        if(requireSmallData[i]>requireBigData[i]){
                            indicatorMax.push(requireSmallData[i]+20);
                        }else{
                            indicatorMax.push(requireBigData[i]+20);
                        }
                    }
                    //
                    var requireIndicator = []
                    for(var i = 0; i < data.data[1].length; i++){
                        var mymap = {};
                        mymap['name'] = data.data[1][i]
                        mymap['max'] = indicatorMax[i]
                        requireIndicator.push(mymap)
                    }
//							console.log(requireIndicator)
//							console.log(indicatorMax)
//							console.log(requireSmallData)
//							console.log(requireBigData)
//							console.log(123)

                    type.setOption({
                        legend: {
                            data: [data.data[0][1],data.data[0][0]],
                            textStyle:{color:'#fff'}
                        },
                        radar: {
                            indicator:requireIndicator
                        },
                        series: [{
                            type: 'radar',
                            data : [
                                {
                                    value : requireBigData,
                                    name : data.data[0][1],
                                    itemStyle:{color:"#ec6253"},
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter:function(params) {
                                                return params.value;
                                            }
                                        }
                                    }
                                },
                                {
                                    value : requireSmallData,
                                    name : data.data[0][0],
                                    itemStyle:{color:"#f2da4a"},
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter:function(params) {
                                                return params.value;
                                            }
                                        }
                                    }
                                }
                            ]
                        }]
                    })
                }
            }
        })
        //月份默认条件
        $.ajax({
            url:"getCountJcXtcsXmWithMonth",
            method:"post",
            success:function (data) {
                console.log(data)
                if (data.code == 1) {
//                            console.log(data.data[0][1])
                    var requireSmallData = []
                    var requireBigData = []
                    for (var i = 0;i<data.data[2].length;i++){
                        if(i<data.data[1].length){
                            requireSmallData.push(data.data[2][i])
                        }else{
                            requireBigData.push(data.data[2][i])
                        }
                    }
                    var indicatorMax = []
                    for(var i = 0;i < requireSmallData.length; i++){
                        if(requireSmallData[i]>requireBigData[i]){
                            indicatorMax.push(requireSmallData[i]+20);
                        }else{
                            indicatorMax.push(requireBigData[i]+20);
                        }
                    }
                    //
                    var requireIndicator = []
                    for(var i = 0; i < data.data[1].length; i++){
                        var mymap = {};
                        mymap['name'] = data.data[1][i]
                        mymap['max'] = indicatorMax[i]
                        requireIndicator.push(mymap)
                    }
//							console.log(requireIndicator)
//							console.log(indicatorMax)
//							console.log(requireSmallData)
//							console.log(requireBigData)
//							console.log(123)

                    typeMonth.setOption({
                        legend: {
                            data: [data.data[0][1],data.data[0][0]],
                            textStyle:{color:'#fff'}
                        },
                        radar: {
                            indicator:requireIndicator
                        },
                        series: [{
                            type: 'radar',
                            data : [
                                {
                                    value : requireBigData,
                                    name : data.data[0][1],
                                    itemStyle:{color:"#ec6253"},
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter:function(params) {
                                                return params.value;
                                            }
                                        }
                                    }
                                },
                                {
                                    value : requireSmallData,
                                    name : data.data[0][0],
                                    itemStyle:{color:"#f2da4a"},
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter:function(params) {
                                                return params.value;
                                            }
                                        }
                                    }
                                }
                            ]
                        }]
                    })
                }
            }
        })
        //点击更多，相应部分铺满全屏
        $(".more").on("click",function(){
            $(this).parents(".out").addClass("active")
            $(".out").not(".active").hide()
            if($(this).parents(".content").next().length){
                $(this).parents(".content").next().hide()
            }
            if($(this).parents(".content").prev().length){
                $(this).parents(".content").prev().hide()
            }
        })
        //点击收起
        $(".diminish").on("click",function(){
            $(".out").not(".active").show()
            $(".active").removeClass("active")
            if($(this).parents(".content").next().length){
                $(this).parents(".content").next().show()
            }
            if($(this).parents(".content").prev().length){
                $(this).parents(".content").prev().show()
            }
            var id = $(this).prevAll(".inner").attr("id")
            switch(id){
                case 'contract':
                    console.log("合同")
//							contractO.xAxis.data = ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
                    // contractO.series[0].data = [0, 900, 1245, 1530, 1376, 1376, 1511, 1689, 1856, 1495, 1292,1200]
                    // contractO.series[1].data = [900, 345, 393, '-', '-', 135, 178, 286, '-', '-', '-','-']
                    // contractO.series[2].data = ['-', '-', '-', 108, 154, '-', '-', '-', 119, 361, 203,92]
//							console.log(contractO.xAxis.data)
//							contract.setOption(contractO)
                    break;
                case 'entrust':
                    // entrustO.xAxis.data = ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
                    // entrustO.series[0].data = [10,20,30,40,50,60,70,80,90,100,110,120]
                    // entrustO.series[1].data = [10,20,30,40,50,60,70,80,90,100,110,120]
                    // entrust.setOption(contractO)
                    break
                case 'map':
                    // mapO.series[0].data = [0, 900, 1245, 1530, 1376, 1376, 1511, 1689, 1856, 1495, 1292,1200]
                    // mapO.series[1].data = [900, 345, 393, '-', '-', 135, 178, 286, '-', '-', '-','-']
                    // mapO.series[2].data = ['-', '-', '-', 108, 154, '-', '-', '-', 119, 361, 203,92]
                    // map.setOption(contractO)
                    break
                case 'type':
                    // typeO.series[0].data[0] = [0, 900, 1245, 1530, 1376, 1376, 1511, 1689, 1856, 1495, 1292,1200]
                    // typeO.series[0].data[1] = [900, 345, 393, '-', '-', 135, 178, 286, '-', '-', '-','-']
                    // type.setOption(contractO)
                    break
                case 'typeMonth':
                    // typeO.series[0].data[0] = [0, 900, 1245, 1530, 1376, 1376, 1511, 1689, 1856, 1495, 1292,1200]
                    // typeO.series[0].data[1] = [900, 345, 393, '-', '-', 135, 178, 286, '-', '-', '-','-']
                    // type.setOption(contractO)
                    break
            }
        })
        $(".search").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='type'){

            }else{
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input" id="test1" placeholder="~" readonly>',
                    success:function(){
                        laydate.render({
                            elem: '#test1', //指定元素
                            type: 'month',
                            range:'~',
                            done:function(value, date, endDate){
                                start = date//重新定义开始
                                end = endDate//重新定义结束
                            }
                        });
                    },
                    yes:function(){
                        console.log(start)
                        console.log(end)
//                                contract.setOption(contractO)
//                                contractO.xAxis.data = getX(start,end)
                        //ajax请求获取相关数据
                        // ...
//                                contract.clear();
                        layer.close(index)
                    },
                });
            }

        })
        $(".content").resize(function(e){
            var id = $(this).find(".inner").attr("id")
            switch(id){
                case "contract":
                    contract.resize()
//							contract.setOption(contractO);
                    break;
                case "entrust":
                    entrust.resize()
                    break
                case "map":
                    map.resize()
                    break
                case "type":
                    type.resize()
                    break
                case "typeMonth":
                    typeMonth.resize()
                    break
            }
        })
        //合同图表点击
        contract.on('click', function (params) {
            if($("#contract").parents(".out").hasClass("active")){
                console.log(params.name)
                // return
                layer.open({
                    type:2,
                    title:"合同数据",
                    area: ['100%', '100%'],
                    content: 'toComprehensive_contract',
                    success:function(layero,index){
                        var body = layer.getChildFrame('body', index);
                        var startDate = new Date(params.name)//获取当前年月
                        var nowMonth = startDate.getMonth(); //当前月
                        var nowYear = startDate.getFullYear(); //当前年
                        //本月第一天
                        var monthStartDate = (new Date(nowYear, nowMonth, 1)).Format("yyyy-MM-dd");                        //本月的结束时间
                        //本月最后一天
                        var monthEndDate = new Date(nowYear, nowMonth+1, 0).Format("yyyy-MM-dd");
                        body.find("#start").val(monthStartDate);
                        body.find("#end").val(monthEndDate);
                        var iframeWin = window[layero.find('iframe')[0]['name']];
                        iframeWin.getData(monthStartDate,monthEndDate)
//								console.log(aaa)
                    }
                })
            }
        });
        contractInfo = function(requireData){
            console.log(requireData)
            layer.open({
                type:2,
                title:"合同名称相关委托单",
                area: ['100%', '100%'],
                content: 'toComprehensive_contractInfo',
                success:function(layero,index){
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    iframeWin.getData(requireData)
                }
            })
        }
        //委托单图表点击
        entrust.on('click', function (params) {
            if($("#entrust").parents(".out").hasClass("active")){
                console.log(params)
                // return
                layer.open({
                    type:2,
                    title:"委托单数据",
                    area: ['100%', '100%'],
                    content: 'toEntrustPage',
                    success: function(layero, index) {
                        var body = layer.getChildFrame('body', index);
                        body.find("#date").val(params.name);

                        var startDate = new Date(params.name)//获取当前年月
                        var nowMonth = startDate.getMonth(); //当前月
                        var nowYear = startDate.getFullYear(); //当前年
                        //本月第一天
                        var monthStartDate = (new Date(nowYear, nowMonth, 1)).Format("yyyy-MM-dd");                        //本月的结束时间
                        //本月最后一天
                        var monthEndDate = new Date(nowYear, nowMonth+1, 0).Format("yyyy-MM-dd");
                        var iframeWin = window[layero.find('iframe')[0]['name']];
                        iframeWin.getData(monthStartDate,monthEndDate)
                    }
                })
            }
        });
        //地图图表点击
        map.on('click', function (params) {
            if($("#map").parents(".out").hasClass("active")){
                console.log(params)
                params.startTime=$("#map_start").val()
                params.endTime=$("#map_end").val()
                console.log(params)
                console.log($("#map_start").val())
                console.log($("#map_end").val())
                // return
                layer.open({
                    type:2,
                    title:params.data.name+"委托单数据",
                    area: ['100%', '100%'],
                    content: 'toMapByArea',
                    success:function(layero,index){
                        var iframeWin = window[layero.find('iframe')[0]['name']];
                        iframeWin.getData(params)
                    }
                })
            }
        });
        //年度分类图表点击
        type.on('click', function (params) {
            if($("#type").parents(".out").hasClass("active")){
                console.log(params)
                // return
                layer.open({
                    type:2,
                    title:params.data.name+"年检测类数据",
                    area: ['100%', '100%'],
                    content:'toTypePage',
                    //'type.html',
                    success:function(layero,index){
                        var iframeWin = window[layero.find('iframe')[0]['name']];
                        iframeWin.getData(params.data.name)
                    }
                })
            }
        });
        //月度分类图表点击
        typeMonth.on('click', function (params) {
            if($("#type").parents(".out").hasClass("active")){
                console.log(params)
                // return
                layer.open({
                    type:2,
                    title:params.data.name+"检测类数据",
                    area: ['100%', '100%'],
                    content:'toTypeWithMonthPage',
                    //'type.html',
                    success:function(layero,index){
                        var iframeWin = window[layero.find('iframe')[0]['name']];
                        iframeWin.getData(params.data.name)
                    }
                })
            }
        });
        typeInfo = function(){
            layer.open({
                type:2,
                title:"合同名称相关委托单",
                area: ['100%', '100%'],
                content: 'typeInfo.html',
                success:function(layero,index){
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    // iframeWin.getData()
                }
            })
        }

        $(".search_contract").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='type'){

            }else{
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input aaa" id="test1" placeholder="~" readonly>',
                    success:function(){
                        lay('.aaa').each(function(){
                            laydate.render({
                                elem: this,
                                type: 'month',
                                range:'~',
                                done:function(value, date, endDate){
                                    start = date//重新定义开始
                                    end = endDate//重新定义结束
                                }
                            });
                        });
                        // laydate.render({
                        //     elem: '#test1', //指定元素
                        //     type: 'month',
                        //     range:'~',
                        //     done:function(value, date, endDate){
                        //         start = date//重新定义开始
                        //         end = endDate//重新定义结束
                        //     }
                        // });
                    },
                    yes:function(){
                        $.ajax({
                            url:'Calculation_contract',
                            type:'post',
                            data:{
                                startTime:$("#test1").val().toString().split("~")[0],
                                endTime:$("#test1").val().toString().split("~")[1]
                            },
                            success:function (data) {
                                contract.setOption({
                                    xAxis: {
                                        data :  data.data[0],
                                    },
                                    series: [
                                        {
                                            name: '辅助',
                                            data:data.data[1],
                                        },
                                        {
                                            name: '增加',
                                            data:data.data[2],
                                        },
                                        {
                                            name: '减少',
                                            data: data.data[3],
                                        }
                                    ]
                                });
                            }
                        })
                        layer.close(index)
                    },
                });
            }
        })

        $(".search_entrust").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='type'){

            }else{
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input" id="test2" placeholder="~" readonly>',
                    success:function(){
                        laydate.render({
                            elem: '#test2', //指定元素
                            type: 'month',
                            range:'~',
                            done:function(value, date, endDate){
                                start = date//重新定义开始
                                end = endDate//重新定义结束
                            }
                        });
                    },
                    yes:function(){
//                                 console.log(start)
//                                 console.log(end);
                        if (start.month.length==1){
                            starttime = start.year+'-0'+start.month;
                        }else {
                            starttime = start.year+'-'+start.month;
                        }
                        if (end.month.length==1){
                            endtime = end.year+'-0'+end.month;
                        }else {
                            endtime = end.year+'-'+end.month;
                        }
                        $.ajax({
                            url : 'getJcCoreWtInfoInOneYear',
                            type : 'post',
                            dataType: 'json',
                            async : 'false',
                            data:{
                                startTime : starttime,
                                endTime : endtime
                            },
                            success : function(result) {
                                if (result.success) {
                                    console.log(result);
                                    $('#count').html("总数："+result.data[2]);
                                    entrust.setOption({
                                        xAxis: {
                                            data :  result.data[0],
                                        },
                                        series: [
                                            {
                                                name: '合同',
                                                data: result.data[1][0],
                                                label: {
                                                    normal: {
                                                        show: true,
                                                        position: 'inside',
                                                        formatter: function (num) {
                                                            if (num.value > 0){
                                                                return num.value;
                                                            }else {
                                                                return "";
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            {
                                                name: '非合同',
                                                data: result.data[1][1],
                                                label: {
                                                    normal: {
                                                        show: true,
                                                        position: 'inside',
                                                        formatter: function (num) {
                                                            if (num.value > 0){
                                                                return num.value;
                                                            }else {
                                                                return "";
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            {
                                                name: '总计',
                                                type: 'line',
                                                lineStyle:{
                                                    opacity : 0,
                                                },
                                                label:{
                                                    show: true,
                                                    textStyle:{
                                                        color:'#fff'
                                                    },
                                                    formatter: function (num) {
                                                        if (num.value > 0){
                                                            return num.value;
                                                        }else {
                                                            return "";
                                                        }
                                                    }
                                                },
                                                data: result.data[1][2]
                                            }

                                        ]
                                    });
                                } else {
                                    alert(result.message);
                                }
                            }
                        });
                        layer.close(index)
                    },
                });
            }
        })

        $(".search_map").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='type'){

            }else{
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input bbb" id="test3" placeholder="~" readonly>',
                    success:function(){
                        lay('.bbb').each(function(){
                            laydate.render({
                                elem: this,
                                type: 'month',
                                range:'~',
                                done:function(value, date, endDate){
                                    start = date//重新定义开始
                                    end = endDate//重新定义结束
                                    $("#map_start").val(start.year+"-"+start.month)
                                    $("#map_end").val(end.year+"-"+end.month)
                                }
                            });
                        });
                        // laydate.render({
                        //     elem: '#test3', //指定元素
                        //     type: 'month',
                        //     range:'~',
                        //     done:function(value, date, endDate){
                        //         start = date//重新定义开始
                        //         end = endDate//重新定义结束
                        // 		$("#map_start").val(start.year+"-"+start.month)
                        // 		$("#map_end").val(end.year+"-"+end.month)
                        //     }
                        // });
                    },
                    yes:function(data){
//                                console.log()
                        $.ajaxSettings.async = false;
                        $.getJSON('./map/langfang.json', function(data){
                            echarts.registerMap( 'hebei', data);
                            var d = [];
                            for( var i=0;i<data.features.length;i++ ){
                                d.push({
                                    name:data.features[i].properties.name
                                })
                                //AJAX获取城市区域的委托单统计
                                $.ajax({
                                    url:"getMapCityAreaWtCount",
                                    method:"post",
                                    data:{
                                        city:"廊坊市",
                                        area:d[i].name,
                                        startTime:$("#test3").val().toString().split("~")[0],
                                        endTime:$("#test3").val().toString().split("~")[1]
                                    },
                                    success:function (data) {
                                        d[i].value = data.data
                                    }
                                })
                            }
                            mapO.series[0] =  {
                                left:'18%',
                                top:'30%',
                                zoom: 0.7,
                                name: 'langfang',
                                type: 'map',
                                mapType: 'hebei',
                                label: {
                                    normal:{
                                        show:true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    },
                                    emphasis: {
                                        show: true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    }
                                },
                                itemStyle: {
                                    borderWidth:1,
                                    borderColor:'#fff',
                                    normal: {
                                        areaColor: '#323c48',
                                        borderColor: 'dodgerblue'
                                    },
                                    emphasis: {
                                        areaColor: '#0f0'
                                    }
                                },
                                data:d,
                            }
                        });
                        $.getJSON('./map/beijing.json', function(data){
                            echarts.registerMap( 'beijing', data);
                            var d = [];
                            for( var i=0;i<data.features.length;i++ ){
                                d.push({
                                    name:data.features[i].properties.name
                                })
                                $.ajax({
                                    url:"getMapCityAreaWtCount",
                                    method:"post",
                                    data:{
                                        city:"北京市",
                                        area:d[i].name,
                                        startTime:$("#test3").val().toString().split("~")[0],
                                        endTime:$("#test3").val().toString().split("~")[1]
                                    },
                                    success:function (data) {
                                        d[i].value = data.data
                                    }
                                })

                            }
                            mapO.series[1] =  {
                                left:'-10%',
                                top:'-10%',
                                zoom: 0.7,
                                name: 'beijing',
                                type: 'map',
                                mapType: 'beijing',
                                label: {
                                    normal:{
                                        show:true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    },
                                    emphasis: {
                                        show: true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    }
                                },
                                itemStyle: {
                                    borderWidth:1,
                                    borderColor:'#fff',
                                    normal: {
                                        areaColor: '#323c48',
                                        borderColor: 'dodgerblue'
                                    },
                                    emphasis: {
                                        areaColor: '#0f0'
                                    }
                                },
                                data:d,
                            }
                        });
                        $.getJSON('./map/tianjin.json', function(data){
                            echarts.registerMap( 'tianjin', data);
                            var d = [];
                            for( var i=0;i<data.features.length;i++ ){
                                d.push({
                                    name:data.features[i].properties.name
                                })
                                $.ajax({
                                    url:"getMapCityAreaWtCount",
                                    method:"post",
                                    data:{
                                        city:"天津市",
                                        area:d[i].name,
                                        startTime:$("#test3").val().toString().split("~")[0],
                                        endTime:$("#test3").val().toString().split("~")[1]
                                    },
                                    success:function (data) {
                                        d[i].value = data.data
                                    }
                                })

                            }
                            mapO.series[2] =  {
                                left:'50%',
                                top:'10%',
                                zoom: 1,
                                name: 'tianjin',
                                type: 'map',
                                mapType: 'tianjin',
                                label: {
                                    normal:{
                                        show:true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    },
                                    emphasis: {
                                        show: true,
                                        textStyle:{
                                            color:'#fff',
                                            fontSize:13
                                        }
                                    }
                                },
                                itemStyle: {
                                    borderWidth:1,
                                    borderColor:'#fff',
                                    normal: {
                                        areaColor: '#323c48',
                                        borderColor: 'dodgerblue'
                                    },
                                    emphasis: {
                                        areaColor: '#0f0'
                                    }
                                },
                                data:d,
                            }
                        });
                        map.setOption(mapO)
                        layer.close(index)
                    },
                });
            }
        })

        $(".search_type").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='type'){
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input ddd" id="test4" placeholder="~" readonly>',
                    success:function(){
                        lay('.ddd').each(function(){
                            laydate.render({
                                // elem: this
                                // ,trigger: 'click'
                                elem: this,
                                type: 'year',
                                range:'~',
                                done:function(value, date, endDate){
                                    start = date//重新定义开始
                                    end = endDate//重新定义结束
                                }
                            });
                        });
                        // laydate.render({
                        //     elem: '#test4', //指定元素
                        //     type: 'year',
                        //     range:'~',
                        //     done:function(value, date, endDate){
                        //         start = date//重新定义开始
                        //         end = endDate//重新定义结束
                        //     }
                        // });
                    },
                    yes:function(){
//                                console.log($("#test4").val().toString().split("~")[0])
//                                console.log($("#test4").val().toString().split("~")[1])
                        console.log(start.year)
                        console.log(end.year)
                        $.ajax({
                            url:"getCountJcXtcsXm",
                            method:"post",
                            data:{
                                startYear:start.year,
                                endYear:end.year
                            },
                            success:function (data) {
                                console.log(data)
                                if (data.code == 1) {
//                            console.log(data.data[0][1])
                                    var requireSmallData = []
                                    var requireBigData = []
                                    for (var i = 0;i<data.data[2].length;i++){
                                        if(i<data.data[1].length){
                                            requireSmallData.push(data.data[2][i])
                                        }else{
                                            requireBigData.push(data.data[2][i])
                                        }
                                    }
                                    var indicatorMax = []
                                    for(var i = 0;i < requireSmallData.length; i++){
                                        if(requireSmallData[i]>requireBigData[i]){
                                            indicatorMax.push(requireSmallData[i]+20);
                                        }else{
                                            indicatorMax.push(requireBigData[i]+20);
                                        }
                                    }
                                    //
                                    var requireIndicator = []
                                    for(var i = 0; i < data.data[1].length; i++){
                                        var mymap = {};
                                        mymap['name'] = data.data[1][i]
                                        mymap['max'] = indicatorMax[i]
                                        requireIndicator.push(mymap)
                                    }
//							console.log(requireIndicator)
//							console.log(indicatorMax)
//							console.log(requireSmallData)
//							console.log(requireBigData)
//							console.log(123)

                                    type.setOption({
                                        legend: {
                                            data: [data.data[0][1],data.data[0][0]],
                                            textStyle:{color:'#fff'}
                                        },
                                        radar: {
                                            indicator:requireIndicator
                                        },
                                        series: [{
                                            type: 'radar',
                                            data : [
                                                {
                                                    value : requireBigData,
                                                    name : data.data[0][1],
                                                    itemStyle:{color:"#ec6253"},
                                                    label: {
                                                        normal: {
                                                            show: true,
                                                            formatter:function(params) {
                                                                return params.value;
                                                            }
                                                        }
                                                    }
                                                },
                                                {
                                                    value : requireSmallData,
                                                    name : data.data[0][0],
                                                    itemStyle:{color:"#f2da4a"},
                                                    label: {
                                                        normal: {
                                                            show: true,
                                                            formatter:function(params) {
                                                                return params.value;
                                                            }
                                                        }
                                                    }
                                                }
                                            ]
                                        }]
                                    })
                                }
                            }
                        })
                        layer.close(index)
                    }
                });
            }
        })

        $(".search_typeMonth").on('click',function(){
            var start,end,id = $(this).prevAll(".inner").attr("id")
            if(id=='typeMonth'){
                var index = layer.open({
                    title:"选择查询日期",
                    area:['300px','auto'],
                    btn:['确定','取消'],
                    type: 1,
                    content: '<input type="text" class="layui-input fff" id="test5" placeholder="~" readonly>',
                    success:function(){
                        lay('.fff').each(function(){
                            laydate.render({
                                // elem: this
                                // ,trigger: 'click'
                                elem: this,
                                type: 'month',
                                range:'~',
                                done:function(value, date, endDate){
                                    start = date//重新定义开始
                                    end = endDate//重新定义结束
                                }
                            });
                        });
                        // laydate.render({
                        // 	elem: '#test5', //指定元素
                        // 	type: 'month',
                        // 	range:'~',
                        // 	done:function(value, date, endDate){
                        // 		start = date//重新定义开始
                        // 		end = endDate//重新定义结束
                        // 	}
                        // });
                    },
                    yes:function(){
//                                console.log($("#test4").val().toString().split("~")[0])
//                                console.log($("#test4").val().toString().split("~")[1])
                        console.log($("#test5").val().toString().split("~")[0])
                        console.log($("#test5").val().toString().split("~")[1])
                        $.ajax({
                            url:"getCountJcXtcsXmWithMonth",
                            method:"post",
                            data:{
                                start:$("#test5").val().toString().split("~")[0],
                                end:$("#test5").val().toString().split("~")[1]
                            },
                            success:function (data) {
                                console.log(data)
                                if (data.code == 1) {
//                            console.log(data.data[0][1])
                                    var requireSmallData = []
                                    var requireBigData = []
                                    for (var i = 0;i<data.data[2].length;i++){
                                        if(i<data.data[1].length){
                                            requireSmallData.push(data.data[2][i])
                                        }else{
                                            requireBigData.push(data.data[2][i])
                                        }
                                    }
                                    var indicatorMax = []
                                    for(var i = 0;i < requireSmallData.length; i++){
                                        if(requireSmallData[i]>requireBigData[i]){
                                            indicatorMax.push(requireSmallData[i]+20);
                                        }else{
                                            indicatorMax.push(requireBigData[i]+20);
                                        }
                                    }
                                    //
                                    var requireIndicator = []
                                    for(var i = 0; i < data.data[1].length; i++){
                                        var mymap = {};
                                        mymap['name'] = data.data[1][i]
                                        mymap['max'] = indicatorMax[i]
                                        requireIndicator.push(mymap)
                                    }
//							console.log(requireIndicator)
//							console.log(indicatorMax)
//							console.log(requireSmallData)
//							console.log(requireBigData)
//							console.log(123)

                                    typeMonth.setOption({
                                        legend: {
                                            data: [data.data[0][1],data.data[0][0]],
                                            textStyle:{color:'#fff'}
                                        },
                                        radar: {
                                            indicator:requireIndicator
                                        },
                                        series: [{
                                            type: 'radar',
                                            data : [
                                                {
                                                    value : requireBigData,
                                                    name : data.data[0][1],
                                                    itemStyle:{color:"#ec6253"},
                                                    label: {
                                                        normal: {
                                                            show: true,
                                                            formatter:function(params) {
                                                                return params.value;
                                                            }
                                                        }
                                                    }
                                                },
                                                {
                                                    value : requireSmallData,
                                                    name : data.data[0][0],
                                                    itemStyle:{color:"#f2da4a"},
                                                    label: {
                                                        normal: {
                                                            show: true,
                                                            formatter:function(params) {
                                                                return params.value;
                                                            }
                                                        }
                                                    }
                                                }
                                            ]
                                        }]
                                    })
                                }
                            }
                        })
                        layer.close(index)
                    }
                });
            }
        })
    })
</script>
</body>
</html>